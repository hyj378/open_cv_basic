<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
</head>
<body>
  <header>
    <h1>#과제1. 물체인식</h1>
    <a href="../과제.html">과제 메인 화면으로</a>
    <a href="과제1.html">과제1 메인 화면으로</a>
  </header>
  <article>
    코드
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div><div style="line-height:130%">55</div><div style="line-height:130%">56</div><div style="line-height:130%">57</div><div style="line-height:130%">58</div><div style="line-height:130%">59</div><div style="line-height:130%">60</div><div style="line-height:130%">61</div><div style="line-height:130%">62</div><div style="line-height:130%">63</div><div style="line-height:130%">64</div><div style="line-height:130%">65</div><div style="line-height:130%">66</div><div style="line-height:130%">67</div><div style="line-height:130%">68</div><div style="line-height:130%">69</div><div style="line-height:130%">70</div><div style="line-height:130%">71</div><div style="line-height:130%">72</div><div style="line-height:130%">73</div><div style="line-height:130%">74</div><div style="line-height:130%">75</div><div style="line-height:130%">76</div><div style="line-height:130%">77</div><div style="line-height:130%">78</div><div style="line-height:130%">79</div><div style="line-height:130%">80</div><div style="line-height:130%">81</div><div style="line-height:130%">82</div><div style="line-height:130%">83</div><div style="line-height:130%">84</div><div style="line-height:130%">85</div><div style="line-height:130%">86</div><div style="line-height:130%">87</div><div style="line-height:130%">88</div><div style="line-height:130%">89</div><div style="line-height:130%">90</div><div style="line-height:130%">91</div><div style="line-height:130%">92</div><div style="line-height:130%">93</div><div style="line-height:130%">94</div><div style="line-height:130%">95</div><div style="line-height:130%">96</div><div style="line-height:130%">97</div><div style="line-height:130%">98</div><div style="line-height:130%">99</div><div style="line-height:130%">100</div><div style="line-height:130%">101</div><div style="line-height:130%">102</div><div style="line-height:130%">103</div><div style="line-height:130%">104</div><div style="line-height:130%">105</div><div style="line-height:130%">106</div><div style="line-height:130%">107</div><div style="line-height:130%">108</div><div style="line-height:130%">109</div><div style="line-height:130%">110</div><div style="line-height:130%">111</div><div style="line-height:130%">112</div><div style="line-height:130%">113</div><div style="line-height:130%">114</div><div style="line-height:130%">115</div><div style="line-height:130%">116</div><div style="line-height:130%">117</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//이미지&nbsp;비교해서&nbsp;원하는&nbsp;대상&nbsp;찾기</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;iostream<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;stdio.h<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;opencv2<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>core<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>core.hpp<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;opencv2<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>xfeatures2d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>nonfree.hpp<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;opencv2<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>imgcodecs.hpp<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;opencv2<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>calib3d.hpp<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;opencv2<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>imgproc.hpp<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;opencv2<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>highgui.hpp<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#ffd500">"opencv2/core/utility.hpp"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#ffd500">"opencv2/core/ocl.hpp"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#ffd500">"opencv2/xfeatures2d.hpp"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#ffd500">"opencv2/calib3d.hpp"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;opencv2<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>opencv.hpp<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">using</span>&nbsp;<span style="color:#ff3399">namespace</span>&nbsp;cv;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">int</span>&nbsp;main()</div><div style="padding:0 6px; white-space:pre; line-height:130%">{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//검출&nbsp;-&amp;gt;&nbsp;기술&nbsp;-&amp;gt;&nbsp;매칭</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Mat&nbsp;img1;&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//*****************각자&nbsp;검출하고싶은&nbsp;물체의&nbsp;이미지&nbsp;파일&nbsp;위치를&nbsp;대입</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;img1&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;imread(<span style="color:#ffd500">"C:/opencv_source/image/model3.jpg"</span>,&nbsp;IMREAD_GRAYSCALE);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(<span style="color:#0086b3"></span><span style="color:#ff3399">!</span>(img1.data))</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span style="color:#ffd500">"no&nbsp;img"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;<span style="color:#c10aff">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//*****************1.검출&nbsp;with&nbsp;sift&nbsp;(SiftFeatureDetector)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Ptr<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;xfeatures2d::SIFT<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;&nbsp;instance_FeatureDetector&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;xfeatures2d::SIFT::create();<span style="color:#999999">//검출을&nbsp;위한&nbsp;인스턴스&nbsp;생성</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;std::vector<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;KeyPoint<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;&nbsp;img1keypoint;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;instance_FeatureDetector<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;detect(img1,&nbsp;img1keypoint);<span style="color:#999999">//Feature2D를&nbsp;상속받았으므로&nbsp;사용가능</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;VideoCapture&nbsp;cap;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;cap.open(<span style="color:#c10aff">0</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//자기장치에&nbsp;달려있는&nbsp;기본카메라&nbsp;open하려면&nbsp;open(0)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//아니면&nbsp;&nbsp;https://docs.opencv.org/3.4.3/d8/dfe/classcv_1_1VideoCapture.html&nbsp;참조</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(<span style="color:#0086b3"></span><span style="color:#ff3399">!</span>cap.isOpened())&nbsp;<span style="color:#999999">//1&nbsp;+&nbsp;CAP_MSMF</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cout&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;<span style="color:#ffd500">"카메라&nbsp;작동&nbsp;불가"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;std::endl;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">1</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;UMat&nbsp;cam;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;namedWindow(<span style="color:#ffd500">"camera"</span>,&nbsp;<span style="color:#c10aff">1</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">for</span>&nbsp;(;;)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cap.read(cam);&nbsp;<span style="color:#999999">//&nbsp;retrieve</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;imshow(<span style="color:#ffd500">"camera"</span>,&nbsp;cam);</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//*****************이미지&nbsp;준비&nbsp;완료&nbsp;1.검출&nbsp;with&nbsp;sift&nbsp;(SiftFeatureDetector)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;KeyPoint<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;&nbsp;camkeypoint;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance_FeatureDetector<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;detect(cam,&nbsp;camkeypoint);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cout&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;<span style="color:#ffd500">"특징점&nbsp;검출&nbsp;완료"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;std::endl;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//제공된&nbsp;모든&nbsp;이미지의&nbsp;키포인트&nbsp;검출&nbsp;완료</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//*****************1.기술&nbsp;with&nbsp;sift&nbsp;(SiftDescriptorExtractor)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ptr<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;xfeatures2d::SIFT<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;&nbsp;instance_Descriptor&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;xfeatures2d::SIFT::create();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mat&nbsp;img1outputarray,&nbsp;camoutputarray;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance_Descriptor<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;compute(img1,&nbsp;img1keypoint,&nbsp;img1outputarray);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance_Descriptor<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;compute(cam,&nbsp;camkeypoint,&nbsp;camoutputarray);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cout&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;<span style="color:#ffd500">"기술&nbsp;완료"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;std::endl;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mat&nbsp;displayOfImg1;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawKeypoints(img1,&nbsp;img1keypoint,&nbsp;displayOfImg1,&nbsp;Scalar(<span style="color:#c10aff">0</span>,&nbsp;<span style="color:#c10aff">0</span>,&nbsp;<span style="color:#c10aff">255</span>),&nbsp;DrawMatchesFlags::DRAW_RICH_KEYPOINTS);<span style="color:#999999">//빨간색&nbsp;DRAW_RICH_KEYPOINTS로&nbsp;나타냄</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namedWindow(<span style="color:#ffd500">"img1의&nbsp;키포인트"</span>);&nbsp;imshow(<span style="color:#ffd500">"img1의&nbsp;키포인트"</span>,&nbsp;displayOfImg1);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mat&nbsp;displayOfImg2;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawKeypoints(cam,&nbsp;camkeypoint,&nbsp;displayOfImg2,&nbsp;Scalar(<span style="color:#c10aff">0</span>,&nbsp;<span style="color:#c10aff">0</span>,&nbsp;<span style="color:#c10aff">255</span>),&nbsp;DrawMatchesFlags::DRAW_RICH_KEYPOINTS);<span style="color:#999999">//빨간색&nbsp;DRAW_RICH_KEYPOINTS로&nbsp;나타냄</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namedWindow(<span style="color:#ffd500">"img2의&nbsp;키포인트"</span>);&nbsp;imshow(<span style="color:#ffd500">"img2의&nbsp;키포인트"</span>,&nbsp;displayOfImg2);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//키포인트&nbsp;검출&nbsp;성공을&nbsp;확인했으므로&nbsp;키포인트&nbsp;기술하기</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;waitKey();</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//*****************1.매칭&nbsp;with&nbsp;sift&nbsp;(SiftDescriptorExtractor)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FlannBasedMatcher&nbsp;FLANNmatcher;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;DMatch<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;&nbsp;match;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FLANNmatcher.match(img1outputarray,&nbsp;camoutputarray,&nbsp;match);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(<span style="color:#0086b3"></span><span style="color:#ff3399">!</span>(match.size()))&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mat&nbsp;tt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawKeypoints(cam,&nbsp;camkeypoint,&nbsp;tt,&nbsp;Scalar::all(<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">1</span>),&nbsp;DrawMatchesFlags::DEFAULT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namedWindow(<span style="color:#ffd500">"키포인트&nbsp;매칭불가..."</span>);&nbsp;imshow(<span style="color:#ffd500">"키포인트&nbsp;매칭불가..."</span>,&nbsp;tt);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;waitKey();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">1</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">double</span>&nbsp;maxd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>;&nbsp;<span style="color:#ff3399">double</span>&nbsp;mind&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;match[<span style="color:#c10aff">0</span>].distance;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">for</span>&nbsp;(<span style="color:#ff3399">int</span>&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>;&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;match.size()&nbsp;;&nbsp;i<span style="color:#0086b3"></span><span style="color:#ff3399">+</span><span style="color:#0086b3"></span><span style="color:#ff3399">+</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">double</span>&nbsp;dist&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;match[i].distance;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(dist&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;mind)&nbsp;mind&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;dist;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(dist&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;&nbsp;maxd)&nbsp;maxd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;dist;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;DMatch<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;&nbsp;good_match;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">for</span>&nbsp;(<span style="color:#ff3399">int</span>&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>;&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;match.size();&nbsp;i<span style="color:#0086b3"></span><span style="color:#ff3399">+</span><span style="color:#0086b3"></span><span style="color:#ff3399">+</span>)&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(match[i].distance&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;max(<span style="color:#c10aff">2</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;mind,&nbsp;<span style="color:#c10aff">0.</span><span style="color:#c10aff">02</span>))&nbsp;good_match.push_back(match[i]);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mat&nbsp;finalOutputImg;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cout&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;<span style="color:#ffd500">"good&nbsp;match&nbsp;의&nbsp;갯수는:&nbsp;"</span><span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;good_match.size()&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;std::endl;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cout&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;<span style="color:#ffd500">"match&nbsp;의&nbsp;갯수는:&nbsp;"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;match.size()&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;std::endl;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawMatches(img1,&nbsp;img1keypoint,&nbsp;cam,&nbsp;camkeypoint,&nbsp;match,&nbsp;finalOutputImg,&nbsp;Scalar(<span style="color:#c10aff">150</span>,&nbsp;<span style="color:#c10aff">30</span>,&nbsp;<span style="color:#c10aff">200</span>),&nbsp;Scalar(<span style="color:#c10aff">0</span>,&nbsp;<span style="color:#c10aff">0</span>,&nbsp;<span style="color:#c10aff">255</span>),&nbsp;std::vector<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;<span style="color:#ff3399">char</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;(),&nbsp;DrawMatchesFlags::DEFAULT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namedWindow(<span style="color:#ffd500">"매칭&nbsp;결과"</span>);&nbsp;imshow(<span style="color:#ffd500">"매칭결과"</span>,&nbsp;finalOutputImg);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cout&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;<span style="color:#ffd500">"매칭&nbsp;완료"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>lt;&nbsp;std::endl;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(waitKey(<span style="color:#c10aff">30</span>)&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&amp;</span>gt;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>)&nbsp;<span style="color:#ff3399">break</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;<span style="color:#c10aff">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>

<a href="https://colorscripter.com/">코드를 입력하는데 이용한 웹사이트</a>
  </article>
</body>
</html>
